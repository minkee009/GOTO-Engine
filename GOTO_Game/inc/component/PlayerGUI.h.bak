#pragma once
#include <ScriptBehaviour.h>
#include <RenderManager.h>
#include <IWindow.h>
#include "PlayerHealth.h"

namespace GOTOEngine
{
	class PlayerHealth;
	class PlayerGUI : public ScriptBehaviour
	{
	private:
		void OnGUI()
		{
			auto winHeight = RenderManager::Get()->GetWindow()->GetHeight();
			auto winWidth = RenderManager::Get()->GetWindow()->GetWidth();

			std::wstring hpText = L" 죽었음 ";

			if (IsValidObject(health) && !health->IsDestroyed())
			{
				int hp = health->GetHP();
				hpText = std::to_wstring(hp);
			}

			std::wstring outText = L" 현재 주황버섯의 체력 : " + hpText;
			
			RenderManager::Get()->DrawString(0, winHeight - 540, 680, 540, outText.c_str(), nullptr, false, {255,127,0,255});

			if (IsValidObject(health) && !health->IsDestroyed())
			{
				std::wstring outText2 = L"SpaceBar로 혼내주기";

				RenderManager::Get()->DrawString(winWidth * 0.5f - 120, 280, 500, 36, outText2.c_str(), nullptr, false, { 255,0,0,255 });
			}
		}
	public:
    PlayerGUI()
    {
        REGISTER_BEHAVIOUR_MESSAGE(OnGUI);
    }
		PlayerHealth* health;
	};
}